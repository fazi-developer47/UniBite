@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

@model UniversityCanteenFoodOrderingSystem.Models.Order
@using UniversityCanteenFoodOrderingSystem.Areas.Identity.Data
@using Microsoft.AspNetCore.Identity
@inject UserManager<AppUser> UserManager

@{
    var currentUser = await UserManager.GetUserAsync(User);
    ViewData["Title"] = "Order Receipt - UniBite";
    Layout = null; //print-friendly, no layout
}
<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
<link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
<link rel="stylesheet" href="~/UniversityCanteenFoodOrderingSystem.styles.css" asp-append-version="true" />



<div class="container mt-4">
    <div class="card shadow-sm">
        <div class="card-header text-center bg-primary text-white">
            <h3>University Canteen Food Ordering System</h3>
        </div>
        <div class="card-body">
            <p><strong>User:</strong> @currentUser.FullName</p>
            <p><strong>Order ID:</strong> @Model.OrderId</p>
            <p><strong>Date:</strong> @Model.OrderDate.ToString("dd-MMM-yyyy HH:mm")</p>
            <p><strong>Status:</strong> @Model.OrderStatus</p>
            <p><strong>Payment Method:</strong> @Model.PaymentMethod</p>

            <h5 class="mt-3">Items:</h5>
            <table class="table table-sm table-bordered">
                <thead class="table-light">
                    <tr>
                        <th>Item</th>
                        <th>Qty</th>
                        <th>Price</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var detail in Model.OrderDetails)
                    {
                        <tr>
                            <td>@detail.MenuItem.Name</td>
                            <td>@detail.Quantity</td>
                            <td>Rs. @detail.Price</td>
                            <td>Rs. @(detail.Quantity * detail.Price)</td>
                        </tr>
                    }
                </tbody>
            </table>

            <h4 class="text-end text-success">Grand Total: Rs. @Model.TotalPrice</h4>
        </div>
        <div class="card-footer text-center">
            <button onclick="window.print()" class="btn btn-outline-primary">
                <i class="bi bi-printer"></i> Print / Save as PDF
            </button>
        </div>
    </div>
</div>
