@model UniversityCanteenFoodOrderingSystem.Areas.Identity.Data.AppUser
@{
    ViewData["Title"] = "User Profile";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-5">
    <h2 class="mb-4 text-primary">
    </h2>

    <div class="card shadow-lg border-0 rounded-3">
        <div class="card-header bg-gradient bg-primary text-white">
            <h5 class="mb-0">
                <i class="bi bi-info-circle me-2"></i> Profile Details
            </h5>
        </div>
        <div class="card-body">
            <dl class="row mb-0">
                <dt class="col-sm-4 fw-bold"><i class="bi bi-person-fill me-2 text-secondary"></i> Full Name</dt>
                <dd class="col-sm-8">@(Model?.FullName ?? "N/A")</dd>

                <dt class="col-sm-4 fw-bold"><i class="bi bi-envelope-fill me-2 text-secondary"></i> Email</dt>
                <dd class="col-sm-8">@(Model?.Email ?? "N/A")</dd>

                <dt class="col-sm-4 fw-bold"><i class="bi bi-telephone-fill me-2 text-secondary"></i> Phone Number</dt>
                <dd class="col-sm-8">@(Model?.PhoneNumber ?? "N/A")</dd>

                <dt class="col-sm-4 fw-bold"><i class="bi bi-calendar-check-fill me-2 text-secondary"></i> Registered On</dt>
                <dd class="col-sm-8">@(Model?.RegisteredOn.ToString("dd-MMM-yyyy") ?? "N/A")</dd>
            </dl>
        </div>
        <div class="card-footer bg-light d-flex justify-content-center gap-3">
            <!-- Back to Dashboard Button -->
            <a asp-controller="Home" asp-action="Index" class="btn btn-link">
               Back to Dashboard
            </a>

            <!-- Edit Profile Button -->
            <a asp-action="Edit" class="btn btn-primary">
                <i class="bi bi-pencil-square me-1"></i> Edit Profile
            </a>


            <!-- Change Password Button -->
            <a asp-page="/Account/Manage/ChangePassword" asp-area="Identity" class="btn btn-warning">
                <i class="bi bi-key-fill me-1"></i> Change Password
            </a>

            <!-- Delete Account Button -->
            <form id="deleteForm" asp-action="Delete" method="post" class="d-inline">
                <button type="button" id="deleteBtn" class="btn btn-danger">
                    <i class="bi bi-trash-fill me-1"></i> Delete Account
                </button>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.getElementById("deleteBtn").addEventListener("click", function () {
            Swal.fire({
                title: 'Are you sure?',
                text: "Your account will be permanently deleted!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#3085d6',
                confirmButtonText: 'Yes, delete it!',
                cancelButtonText: 'Cancel'
            }).then((result) => {
                if (result.isConfirmed) {
                    document.getElementById("deleteForm").submit();
                }
            });
        });
    </script>

    @* Alert on Profile *@
    @if (TempData["Message"] != null)
    {
        <script>
            Swal.fire({
                toast: true,
                position: "top-end",
                icon: "success",
                title: "@TempData["Message"]",
                showConfirmButton: false,
                timer: 3000
            });
        </script>
    }
    else if (TempData["Error"] != null)
    {
        <script>
            Swal.fire({
                position: "top-end",
                icon: "error",
                title: "@TempData["Error"]",
                showConfirmButton: true
            });
        </script>
    }
}
