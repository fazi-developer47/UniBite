@page
@model RegisterConfirmationModel
@{
    ViewData["Title"] = "Register confirmation";
    var isAdmin = User.IsInRole("Admin"); // check if current user is Admin
}

<h1>@ViewData["Title"]</h1>

@{
    if (@Model.DisplayConfirmAccountLink)
    {
        <p>
            This app does not currently have a real email sender registered, see
            <a href="https://aka.ms/aspaccountconf">these docs</a> for how to configure a real email sender.
            Normally this would be emailed:
            <a id="confirm-link" href="@Model.EmailConfirmationUrl">Click here to confirm your account</a>
        </p>
    }
    else
    {
        <p>
            Please check your email to confirm your account.
        </p>
    }
}

<!--Add role-based button -->
@if (isAdmin)
{
    <!-- Admin flow: back to profile -->
    <a asp-controller="Admin" asp-action="Details" class="btn btn-primary mt-3">
        <i class="fas fa-arrow-left me-2"></i> Back to Profile
    </a>
}
else
{
    <!-- Normal user flow: go to login -->
    <a asp-page="/Account/Login" class="btn btn-primary mt-3">
        <i class="fas fa-sign-in-alt me-2"></i> Go to Login
    </a>
}

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    @*Alert on Item*@
    @if (TempData["Message"] != null)
    {
        <script>
            Swal.fire({
                toast: true,
                position: "top-end",
                icon: "success",
                title: "@TempData["Message"]",
                showConfirmButton: false,
                timer: 3000
            });
        </script>
    }
    else if (TempData["Error"] != null)
    {
        <script>
            Swal.fire({
                position: "top-end",
                icon: "error",
                title: "@TempData["Error"]",
                showConfirmButton: true
            });
        </script>
    }
}
